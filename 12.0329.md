# 第十二次课

# 上次内容

6.1.1
互联设备
集线器、交换机、路由器、网关

互联网：通过TCP/IP 实现的网际互连隐藏了网络的细节（包括底层网络技术、拓扑结构等），提供通用的一致性的网络服务，互联网或Internet 在逻辑上是一个统一的、整体的虚拟网络，用户完全可将其看作是一个单一的网络。

性能指标
- 带宽
- 时延，多个成分，也与层有关

6.1.2 五层模型

IP 地址在网络层上屏蔽了异种网络之间物理地址等特性的差异，利于网间通信的实现。


# 6
## 6.1
### 6.1.3 网络层协议与IP协议地址
IP:32bit 主要为ABC三类p21
- A:0xxxxxxx|24位主机号
- B:10xxxxxx|xxxxxxxx|16位主机号
- C:110xxxxx|xxxxxxxx|xxxxxxxx|8位主机号

点分十进制表示法

#### 子网，掩码

手里只有C类地址，主机号数量不够用；将来的设备会越来越多->**子网划分**

取高位的主机位**跟网络号相连的**，划分子网，形成新的网络号，剩下的部分作为主机号。

但是再拿到一个新的IP地址，就不知道实际的网络号是多少->**掩码**
实际网络号都对应1，主机号都对应0.

掩码和ip地址相与即得网络号。

表示法：点分十进制ip地址后给出掩码中1的位数
```
189.23.0.0/16
```

> 例子：135.41.0.0/16 划分为20个能容纳200台主机的网络
> 10000111|00101001|*
>
> 200 < 256 = 2^8
> 20 < 32 = 2^5
>
> 考虑多分网络号：掩码11111111|11111111|11111111|00000000
>
> 第一个子网
> 135.41.0.1/24 ~ 135.41.0.200/24
> 第二十个子网
> 135.41.19.1/24 ~ 135.41.19.200/24
>
> 考虑多分主机号：掩码11111111|11111111|11111000|00000000

> 例子：每个子网中主机数不同

#### 地址转换

- ip-主机名
  - 小型：HOSTS
  - 大型：DNS
- ip-（同一个网络中的）主机物理地址
  - ip->物理：ARP
  - 物理->ip：RARP

#### ip包首部
p29
最小的ip包：只有固定首部，20字节
- V版本,4bit:ipv4/6
- HL首部长度,4bit:0101(5倍于4字节=20字节)
- TOS服务类型,8bit
- TLEN总长度,16bit:整个包实际总长
- Identification标识符16bit,Flag标志3bit,Offset分片偏移量13bit:编号
- TTL生存时间,8bit
  - 丢包：TTL归零
- Protocol协议,8bit:UDP,TCP
- Checksum首部校验和,16bit
- 源ip
- 目的ip
